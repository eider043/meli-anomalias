<?xml version='1.0' encoding='utf-8'?>
<mxfile host="app.diagrams.net" modified="2026-01-29T00:00:00.000Z" agent="ChatGPT" version="20.8.23" type="device"><diagram id="diagram1" name="Ejercicio 1 - Arquitectura"><mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="900" math="0" shadow="0"><root><mxCell id="0" /><mxCell id="1" parent="0" /><mxCell id="A" value="precios_historicos.csv" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shape=mxgraph.flowchart.data;fillColor=#dae8fc;" vertex="1" parent="1"><mxGeometry x="60" y="60" width="220" height="60" as="geometry" /></mxCell><mxCell id="B" value="Carga + parse fechas&#10;Orden temporal por ITEM_ID" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="320" y="60" width="280" height="70" as="geometry" /></mxCell><mxCell id="C" value="Ventanas (rolling) solo pasado&#10;shift(1) + rolling" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="640" y="60" width="280" height="70" as="geometry" /></mxCell><mxCell id="GT" value="Ground Truth proxy&#10;rolling MAD z-score&#10;(GT_ROLL_WINDOW, GT_THRESHOLD_Z)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="980" y="40" width="290" height="90" as="geometry" /></mxCell><mxCell id="STAT" value="Modelo estadístico (baseline)&#10;rolling MAD z-score&#10;(ROLL_WINDOW, ANOMALY_THRESHOLD_Z)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="980" y="150" width="290" height="90" as="geometry" /></mxCell><mxCell id="H2H" value="Modo A: Head-to-Head subset&#10;Estratificado (positivos/negativos)&#10;H2H_N_TOTAL, H2H_POS_FRAC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shape=mxgraph.flowchart.decision;fillColor=#fff2cc;" vertex="1" parent="1"><mxGeometry x="260" y="210" width="320" height="90" as="geometry" /></mxCell><mxCell id="LLM1" value="LLM eval (API)&#10;llm_predict en TODAS&#10;las filas del subset" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="640" y="220" width="280" height="70" as="geometry" /></mxCell><mxCell id="PRE" value="Modo B: Prefiltro producción&#10;Candidatos = label_stat==ANOMALO&#10;Cap MAX_LLM_CALLS_PROD" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shape=mxgraph.flowchart.decision;fillColor=#fff2cc;" vertex="1" parent="1"><mxGeometry x="260" y="340" width="320" height="90" as="geometry" /></mxCell><mxCell id="LLM2" value="LLM producción (API)&#10;llm_predict SOLO en&#10;candidatos (stat)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="640" y="350" width="280" height="70" as="geometry" /></mxCell><mxCell id="OUT1" value="outputs/predictions_h2h.csv" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shape=mxgraph.flowchart.document;fillColor=#f8cecc;" vertex="1" parent="1"><mxGeometry x="980" y="240" width="290" height="60" as="geometry" /></mxCell><mxCell id="OUT2" value="outputs/predictions_prefilter.csv" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shape=mxgraph.flowchart.document;fillColor=#f8cecc;" vertex="1" parent="1"><mxGeometry x="980" y="370" width="290" height="60" as="geometry" /></mxCell><mxCell id="EVAL" value="Evaluación&#10;F1/Precision/Recall&#10;+ Bootstrap ΔF1 (A vs B)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="980" y="500" width="290" height="90" as="geometry" /></mxCell><mxCell id="PLOTS" value="Plots por producto&#10;STAT vs LLM + bandas&#10;(stat_lower/stat_upper)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;fillColor=#d5e8d4;" vertex="1" parent="1"><mxGeometry x="640" y="520" width="280" height="80" as="geometry" /></mxCell><mxCell id="METRICS" value="outputs/metrics_table_*.csv&#10;outputs/bootstrap_*.json" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;shape=mxgraph.flowchart.document;fillColor=#f8cecc;" vertex="1" parent="1"><mxGeometry x="980" y="630" width="290" height="70" as="geometry" /></mxCell><mxCell id="NOTE" value="Nota:&#10;Producción: usar prefiltro&#10;por costo/latencia.&#10;Head-to-head: comparación justa." style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#999999;dashed=1;" vertex="1" parent="1"><mxGeometry x="60" y="520" width="220" height="110" as="geometry" /></mxCell><mxCell id="e1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="A" target="B"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="B" target="C"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="C" target="GT"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="C" target="STAT"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e5" value="subset" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="STAT" target="H2H"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="H2H" target="LLM1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="LLM1" target="OUT1"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e8" value="candidatos" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="STAT" target="PRE"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="PRE" target="LLM2"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="LLM2" target="OUT2"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e11" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="OUT1" target="EVAL"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="OUT2" target="EVAL"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="EVAL" target="METRICS"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e14" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="OUT1" target="PLOTS"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="OUT2" target="PLOTS"><mxGeometry relative="1" as="geometry" /></mxCell><mxCell id="e16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="PLOTS" target="METRICS"><mxGeometry relative="1" as="geometry" /></mxCell></root></mxGraphModel></diagram></mxfile>